<?xml version="1.0" encoding="UTF-8" ?>

<container xmlns="http://symfony.com/schema/dic/services" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">
	<parameters>
		<parameter key="sylius.behat.page.admin.channel.update.class">Tests\MangoSylius\ExtendedChannelsPlugin\Behat\Page\Admin\Channel\UpdatePage</parameter>
	</parameters>

    <services>
		<service id="sylius_extended_channels.context.ui.admin.channel" class="Tests\MangoSylius\ExtendedChannelsPlugin\Behat\Context\Ui\Admin\ManagingChannelsContext" decorates="sylius.behat.context.ui.admin.managing_channels">
			<argument type="service" id="sylius.behat.page.admin.channel.update" />
			<argument type="service" id="sylius.behat.shared_storage" />
			<argument type="service" id="__symfony__.doctrine.orm.entity_manager" />
			<tag name="fob.context_service" />
		</service>

		<service id="sylius_extended_channels.context.ui.admin.order" class="Tests\MangoSylius\ExtendedChannelsPlugin\Behat\Context\Ui\Admin\ManagingOrderContext">
			<argument type="service" id="Tests\MangoSylius\ExtendedChannelsPlugin\Behat\Page\Admin\Order\ShowPageInterface" />
			<argument type="service" id="sylius.behat.notification_checker" />
			<tag name="fob.context_service" />
		</service>

		<service id="sylius_extended_channels.context.domain.email" class="Tests\MangoSylius\ExtendedChannelsPlugin\Behat\Context\Domain\EmailContext">
			<argument type="service" id="sylius.behat.email_checker" />
			<tag name="fob.context_service" />
		</service>

		<service id="sylius_extended_channels.context.domain.exchange_rates" class="Tests\MangoSylius\ExtendedChannelsPlugin\Behat\Context\Domain\ExchangeRatesContext">
			<argument type="service" id="__symfony__.sylius.repository.exchange_rate" />
			<tag name="fob.context_service" />
		</service>

		<service id="sylius_extended_channels.context.domain.command" class="Tests\MangoSylius\ExtendedChannelsPlugin\Behat\Context\Domain\CommandContext">
			<argument type="service" id="__symfony__.kernel" />
			<tag name="fob.context_service" />
		</service>

		<service id="sylius_extended_channels.context.ui.shop.product" class="Tests\MangoSylius\ExtendedChannelsPlugin\Behat\Context\Ui\Shop\ProductContext">
			<argument type="service" id="__symfony__.sylius.repository.product" />
			<argument type="service" id="__symfony__.sylius.repository.channel" />
			<tag name="fob.context_service" />
		</service>

		<service id="sylius_extended_channels.context.setup.channel" class="Tests\MangoSylius\ExtendedChannelsPlugin\Behat\Context\Setup\ChannelContext">
			<argument type="service" id="__symfony__.doctrine.orm.entity_manager" />
			<argument type="service" id="sylius.behat.shared_storage" />
			<tag name="fob.context_service" />
		</service>

		<service id="sylius_extended_channels.context.setup.order" class="Tests\MangoSylius\ExtendedChannelsPlugin\Behat\Context\Setup\OrderContext">
			<argument type="service" id="__symfony__.doctrine.orm.entity_manager" />
			<argument type="service" id="sylius.behat.shared_storage" />
			<argument type="service" id="__symfony__.sylius.factory.customer" />
			<argument type="service" id="__symfony__.sylius.product_variant_resolver.default" />
			<argument type="service" id="__symfony__.sylius.factory.order_item" />
			<argument type="service" id="__symfony__.sylius.order_item_quantity_modifier" />
			<argument type="service" id="__symfony__.sylius.factory.order" />
			<argument type="service" id="__symfony__.sm.factory" />
			<argument type="service" id="__symfony__.kernel" />
			<tag name="fob.context_service" />
		</service>

		<service id="sylius_extended_channels.context.ui.shop.order" class="Tests\MangoSylius\ExtendedChannelsPlugin\Behat\Context\Ui\Shop\OrderContext">
			<argument type="service" id="sylius.behat.shared_storage" />
			<argument type="service" id="__symfony__.event_dispatcher" />
			<tag name="fob.context_service" />
		</service>

		<service id="Tests\MangoSylius\ExtendedChannelsPlugin\Behat\Page\Admin\Order\ShowPageInterface"
				 class="Tests\MangoSylius\ExtendedChannelsPlugin\Behat\Page\Admin\Order\ShowPage"
				 parent="sylius.behat.symfony_page"
				 public="true"
		/>

		<service id="sylius.behat.email_checker" class="Sylius\Component\Core\Test\Services\EmailChecker">
			<argument>%__symfony__.kernel.cache_dir%/spool</argument>
		</service>
    </services>
</container>
